MDGridLayout:
    cols: 1
    MDTopAppBar:
        pos_hint: {"top": 1}
        elevation: 4
        title: "[b]Task Management For Students[/b]"
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
    MDNavigationLayout:
        MDScreenManager:
            id: screen_manager
            MDScreen:
                name: "scr 1"
                MDGridLayout:
                    pos_hint: {"top": 0.95}
                    cols: 2
                    size_hint_y: None
                    height: self.minimum_height
                    MDLabel:
                        text: "5 shortest deadlines"
                        halign: "center"
                    MDLabel:
                        text: "5 most important"
                        halign: "center"
                    MDList:
                        id: shortest
                    MDList:
                        id: important
                MDBoxLayout:
                    orientation: "horizontal"
                    pos_hint: {"bottom": 0.85}
                    MDFloatingActionButton:
                        icon:"plus"
                        on_release: app.show_tasks()
                    MDFlatButton:
                        text: "Delete selected"
                        on_release: app.delete_selected()
                    MDRectangleFlatButton:
                        text: "Set Done"
                        on_release: app.set_done()

            AllTaskView:
                name: "all_tasks"
            CustomSort:
                name: "custom_sort"
            Archive:
                name: "archive"
            PreferencesScreen:
                name: "preferences"
                MDBoxLayout:
                    orientation: "vertical"
                    MDList:
                        id: list
                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: None
                            height: dp(48)
                            OneLineIconListItem:
                                text: "ECTS"
                                bg_color: (1,1,1,1)
                                theme_text_color: "Custom"
                                text_color: (0,1,0,1)
                                IconLeftWidgetWithoutTouch:
                                    theme_text_color: "Custom"
                                    icon: "star"
                                    icon_color: (0,1,0,1)
                            MDSlider:
                                id: ECTS
                                max: 5
                                step: 1
                                value: app.pref_value('ECTS')
                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: None
                            height: dp(48)
                            OneLineIconListItem:
                                text: "Due Date"
                                IconLeftWidgetWithoutTouch:
                                    icon: "calendar-clock"
                            MDSlider:
                                id: Due_date
                                max: 5
                                step: 1
                                value: app.pref_value('Due_date')
                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: None
                            height: dp(48)
                            OneLineIconListItem:
                                text: "Grade Percentage"
                                IconLeftWidgetWithoutTouch:
                                    icon: "percent"
                            MDSlider:
                                id: Grade_percentage
                                max: 5
                                step: 1
                                value: app.pref_value('Grade_percentage')
                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: None
                            height: dp(48)
                            OneLineIconListItem:
                                text: "Difficulty"
                                IconLeftWidgetWithoutTouch:
                                    icon: "fire"
                            MDSlider:
                                id: Difficulty
                                max: 5
                                step: 1
                                value: app.pref_value('Difficulty')
                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: None
                            height: dp(48)
                            OneLineIconListItem:
                                text: "Time Consumption"
                                IconLeftWidgetWithoutTouch:
                                    icon: "timer"
                            MDSlider:
                                id: Time_consumption
                                max: 5
                                step: 1
                                value: app.pref_value('Time_consumption')
                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: None
                            height: dp(48)
                            OneLineIconListItem:
                                text: "Likability"
                                IconLeftWidgetWithoutTouch:
                                    icon: "heart"
                            MDSlider:
                                id: Likability
                                max: 5
                                step: 1
                                value: app.pref_value('Likability')
                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: None
                            height: dp(48)
                            OneLineIconListItem:
                                text: "Importance"
                                IconLeftWidgetWithoutTouch:
                                    icon: "exclamation"
                            MDSlider:
                                id: Importance
                                hint:True
                                max: 5
                                step: 1
                                value: app.pref_value('Importance')
                    MDFlatButton:
                        id: submit
                        text: "Submit changes"
        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)
            ContentNavigationDrawer:
                screen_manager: screen_manager
                nav_drawer: nav_drawer
<ContentNavigationDrawer>
    MDList:
        OneLineListItem:
            text: "Main menu"
            on_press:
                root.nav_drawer.set_state("close")
                root.screen_manager.current = "scr 1"
        OneLineListItem:
            text: "Preferences Sort"
            on_press:
                root.nav_drawer.set_state("close")
                root.screen_manager.current = "all_tasks"
        OneLineListItem:
            text: "Custom Sort"
            on_press:
                root.nav_drawer.set_state("close")
                root.screen_manager.current = "custom_sort"
        OneLineListItem:
            text: "Archive"
            on_press:
                root.nav_drawer.set_state("close")
                root.screen_manager.current = "archive"
        OneLineListItem:
            text: "Preferences"
            on_press:
                root.nav_drawer.set_state("close")
                root.screen_manager.current = "preferences"
<ListItemWithCheckbox>:
    RightCheckbox:
        id: check
        on_active: app.on_checkbox_active(*args)

<TestItem>:
    theme_text_color: "Custom"
    text_color: 0,1,0,1
    secondary_text_color: 0,1,0,1
    RightCheckbox:
        id: check
        on_active: app.on_checkbox_active(*args)
    IconLeftWidget:
        theme_text_color: "Custom"
        icon: "menu"
        icon_color: (0,1,0,1)
