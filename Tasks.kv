MDGridLayout:
    cols: 1
    MDTopAppBar:
        pos_hint: {"top": 1}
        elevation: 4
        title: "[b]Task Management For Students[/b]"
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
        md_bg_color: app.secondary_text_color
    MDNavigationLayout:
        MDScreenManager:
            id: screen_manager
            MDScreen:
                name: "scr 1"
                MDGridLayout:
                    pos_hint: {"top": 0.94}
                    cols: 2
                    size_hint_y: None
                    height: 0.75
                    MDLabel:
                        text: "5 shortest deadlines \n"
                        halign: "center"
                        font_style: "H6"
                        color: app.header_color
                    MDLabel:
                        text: "5 most important \n"
                        halign: "center"
                        font_style: "H6"
                        color: app.header_color
                    MDList:
                        id: shortest
                    MDList:
                        id: important
                MDBoxLayout:
                    orientation: "horizontal"
                    size_hint: (1, 0.2)
                    pos_hint: {"bottom": 0.0}
                    padding: dp(10)
                    spacing: dp(10)

                    CustomButton:
                        text: "Add tasks"
                        on_release: app.show_tasks()
                        size_hint_x: 1


                    CustomButton:
                        text: "Delete selected"
                        on_release: app.delete_selected()
                        size_hint_x: 1


                    CustomButton:
                        text: "Set Done"
                        on_release: app.set_done()
                        size_hint_x: 1
            AllTaskView:
                name: "all_tasks"
            CustomSort:
                name: "custom_sort"
            Archive:
                name: "archive"
            MDScreen:
                name: "settings"
                MDBoxLayout:
                    orientation: "vertical"
                    Check:
                        id: xd
                        active: True
                        on_active: print(root.id)
                    Check:
                        id: lol
                    ItemConfirm:
                        id: Pink
                        text: "Pink"
                    ItemConfirm:
                        id: Blue
                        text: "Blue"
                    MDFlatButton:
                        text: "Confirm change"
                        on_release: app.update_theme()

            PreferencesScreen:
                name: "preferences"

                size_hint:(1,1)
                MDFloatLayout:
                    MDBoxLayout:
                        orientation: "vertical"
                        size_hint:(1,1)
                        padding: dp(10)
                        MDLabel:
                            size_hint_y: None
                            height: dp(48)
                            text: "Select preferences values"
                            halign: "center"
                            font_style: "H6"
                            color: app.header_color
                            pos_hint: {"top": 1}
                        MDList:
                            id: list
                            size_hint:(1,1)
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: dp(48)
                                md_bg_color: app.bg_color
                                OneLineIconListItem:
                                    text: "ECTS"
                                    theme_text_color: "Custom"
                                    text_color: app.primary_text_color
                                    divider_color: app.header_color
                                    IconLeftWidgetWithoutTouch:
                                        theme_text_color: "Custom"
                                        icon: "star"
                                        icon_color: app.primary_text_color
                                CustomSlider:
                                    id: ECTS
                                    max: 5
                                    step: 1
                                    value: app.pref_value('ECTS')
                                    color: app.slider_color
                                    hint_text_color: app.slider_color
                                    thumb_color_active: app.slider_color
                                    thumb_color_inactive: app.slider_color

                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: dp(48)
                                md_bg_color: app.bg_color
                                OneLineIconListItem:
                                    text: "Due Date"
                                    theme_text_color: "Custom"
                                    text_color: app.primary_text_color
                                    divider_color: app.header_color
                                    IconLeftWidgetWithoutTouch:
                                        icon: "calendar-clock"
                                        theme_text_color: "Custom"
                                        icon_color: app.primary_text_color
                                CustomSlider:
                                    id: Due_date
                                    max: 5
                                    step: 1
                                    value: app.pref_value('Due_date')
                                    color: app.slider_color
                                    hint_text_color: app.slider_color
                                    thumb_color_active: app.slider_color
                                    thumb_color_inactive: app.slider_color
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: dp(48)
                                md_bg_color: app.bg_color
                                OneLineIconListItem:
                                    text: "Grade Percentage"
                                    theme_text_color: "Custom"
                                    text_color: app.primary_text_color
                                    divider_color: app.header_color
                                    IconLeftWidgetWithoutTouch:
                                        icon: "percent"
                                        theme_text_color: "Custom"
                                        icon_color: app.primary_text_color
                                CustomSlider:
                                    id: Grade_percentage
                                    max: 5
                                    step: 1
                                    value: app.pref_value('Grade_percentage')
                                    color: app.slider_color
                                    hint_text_color: app.slider_color
                                    thumb_color_active: app.slider_color
                                    thumb_color_inactive: app.slider_color
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: dp(48)
                                md_bg_color: app.bg_color
                                OneLineIconListItem:
                                    text: "Difficulty"
                                    theme_text_color: "Custom"
                                    text_color: app.primary_text_color
                                    divider_color: app.header_color
                                    IconLeftWidgetWithoutTouch:
                                        icon: "fire"
                                        theme_text_color: "Custom"
                                        icon_color: app.primary_text_color
                                CustomSlider:
                                    id: Difficulty
                                    max: 5
                                    step: 1
                                    value: app.pref_value('Difficulty')
                                    color: app.slider_color
                                    hint_text_color: app.slider_color
                                    thumb_color_active: app.slider_color
                                    thumb_color_inactive: app.slider_color
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: dp(48)
                                md_bg_color: app.bg_color
                                OneLineIconListItem:
                                    text: "Time Consumption"
                                    theme_text_color: "Custom"
                                    text_color: app.primary_text_color
                                    divider_color: app.header_color
                                    IconLeftWidgetWithoutTouch:
                                        icon: "timer"
                                        theme_text_color: "Custom"
                                        icon_color: app.primary_text_color
                                CustomSlider:
                                    id: Time_consumption
                                    max: 5
                                    step: 1
                                    value: app.pref_value('Time_consumption')
                                    color: app.slider_color
                                    hint_text_color: app.slider_color
                                    thumb_color_active: app.slider_color
                                    thumb_color_inactive: app.slider_color
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: dp(48)
                                md_bg_color: app.bg_color
                                OneLineIconListItem:
                                    text: "Likability"
                                    theme_text_color: "Custom"
                                    text_color: app.primary_text_color
                                    divider_color: app.header_color
                                    IconLeftWidgetWithoutTouch:
                                        icon: "heart"
                                        theme_text_color: "Custom"
                                        icon_color: app.primary_text_color
                                CustomSlider:
                                    id: Likability
                                    max: 5
                                    step: 1
                                    value: app.pref_value('Likability')
                                    color: app.slider_color
                                    hint_text_color: app.slider_color
                                    thumb_color_active: app.slider_color
                                    thumb_color_inactive: app.slider_color
                            MDBoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: dp(48)
                                md_bg_color: app.bg_color
                                divider_color: app.header_color
                                OneLineIconListItem:
                                    text: "Importance"
                                    theme_text_color: "Custom"
                                    text_color: app.primary_text_color
                                    divider_color: app.header_color
                                    IconLeftWidgetWithoutTouch:
                                        icon: "exclamation"
                                        theme_text_color: "Custom"
                                        icon_color: app.primary_text_color
                                CustomSlider:
                                    id: Importance
                                    hint:True
                                    max: 5
                                    step: 1
                                    value: app.pref_value('Importance')
                                    color: app.slider_color
                                    hint_text_color: app.slider_color
                                    thumb_color_active: app.slider_color
                                    thumb_color_inactive: app.slider_color
                    CustomButton:
                        id: submit
                        text: "Submit changes"
                        pos_hint_x: {"x":1}
                        size_hint_y: 0.1
                        on_release: app.submit_preferences_changes()


        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)
            ContentNavigationDrawer:
                screen_manager: screen_manager
                nav_drawer: nav_drawer
<ContentNavigationDrawer>
    MDList:
        OneLineListItem:
            text: "Main menu"
            on_press:
                root.nav_drawer.set_state("close")
                root.screen_manager.current = "scr 1"
        OneLineListItem:
            text: "Preferences Sort"
            on_press:
                root.nav_drawer.set_state("close")
                root.screen_manager.current = "all_tasks"
        OneLineListItem:
            text: "Custom Sort"
            on_press:
                root.nav_drawer.set_state("close")
                root.screen_manager.current = "custom_sort"
        OneLineListItem:
            text: "Archive"
            on_press:
                root.nav_drawer.set_state("close")
                root.screen_manager.current = "archive"
        OneLineListItem:
            text: "Preferences"
            on_press:
                root.nav_drawer.set_state("close")
                root.screen_manager.current = "preferences"
        OneLineListItem:
            text: "Settings"
            on_press:
                root.nav_drawer.set_state("close")
                root.screen_manager.current = "settings"
<ListItemWithCheckbox>:
    RightCheckbox:
        id: check
        on_active: app.on_checkbox_active(*args)
        color_inactive: 0.00000, 0.52941, 0.60000,0.75
        color_active: app.primary_text_color

<TestItem>:
    theme_text_color: "Custom"
    text_color: 0,1,0,1
    secondary_text_color: 0,1,0,1
    RightCheckbox:
        id: check
        on_active: app.on_checkbox_active(*args)
    IconLeftWidget:
        theme_text_color: "Custom"
        icon: "menu"
        icon_color: (0,1,0,1)
<CustomButton>:
    line_color: app.primary_text_color
    text_color: app.primary_text_color
    md_bg_color: app.bg_color
<CustomCheckbox>:
    color_inactive: 0.00000, 0.52941, 0.60000,0.75
    selected_color: app.primary_text_color
<CustomInput>:
    text_color_focus: app.primary_text_color
    hint_text_color_focus: app.primary_text_color
    helper_text_color_normal: 0,0,0,0
    helper_text_color_focus: app.secondary_text_color
    line_color_focus: app.primary_text_color
<CustomDatePicker>:
    primary_color: app.primary_text_color
    accent_color: app.bg_color
    selector_color: app.primary_text_color
    text_current_color: app.primary_text_color
    text_button_color: app.primary_text_color
<Check@MDCheckbox>:
    group: 'group'
    size_hint: None, None
    size: dp(48), dp(48)
<ItemConfirm>
    on_release: root.set_icon(check)

    CheckboxLeftWidget:
        id: check
        group: "check"